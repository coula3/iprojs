<% if flash.has?(:message) %>
    <span style="color:red"><%= flash[:message] %></span>
<% end %><br><br>

<%@user%>
<%@other_gender = ["Male", "Female", "Non-Binary"].delete_if {|gender| gender == current_user.gender}%>

<form action="/users/<%=@user.id%>" method="POST">
    <input id="hidden" type="hidden" name="_method" value="patch">
    <p><label>First Name </label><input type="text" name="first_name" value="<%= @user.first_name.capitalize %>"></p>
    <p><label>Last Name </label><input type="text" name="last_name" value="<%= @user.last_name.capitalize %>"></p>
    <p><label>Organization </label><input type="text" name="organization" value="<%= @user.organization.titlecase %>"></p>
    <p><label>Date of Birth </label><input type="date" id="dob" name="dob" value="<%= @user.dob.to_s.gsub(" 00:00:00 UTC", "") %>"></p>
    <p><label for="gender">Gender </label>
    <select name="gender">
        <% if @other_gender.size == 2 %> 
            <option value=" " selected> </option>
        <% end %>
        <%=i = 0 %>
        <% until i == @other_gender.size %>
            <option value="<%=@other_gender[i]%>" selected><%=@other_gender[i]%></option> 
            <%=i += 1%>
        <% end %>
        <option value="<%=@user.gender%>" selected><%=@user.gender%></option>
    </select></p>
    <p><label>eMail </label><input type="text" name="email" value="<%= @user.email.downcase %>"></p>
    <p><label>Password </label><input type="password" name="password" value="<%= @user.password %>"></p>

   <input type="submit" id="submit" value="Save">
   <a href="/users/<%=current_user.id%>">Cancel</a>
</form>
